!function(self_name){var viglink,$;$={each:function(e,t){var n,i;for(n=0,i=e.length;i>n;n++)t(e[n],n)},extend:function(e){var t,n,i,o,r=arguments.length;for(e=e||{},n=1;r>n;n++)if(o=arguments[n],void 0!==o&&null!==o)for(i in o)t=o[i],e!==t&&void 0!==t&&(e[i]=t);return e}},$.extend($,{addClass:function(e,t){$.hasClass(e,t)||(e.className=(e.className?e.className+" ":"")+t)},attrValues:function(e,t,n){return n=n||" ",t=e[t],t?t.split(n):[]},bind:function(e,t){return function(){return e.apply(t,arguments)}},browser:function(){var e,t={},n=navigator.userAgent.toLowerCase().replace(/\s*[()]\s*/g,"; ").replace(/(\/[\w.]+)\s+/g,"$1; ").replace(/\;\s*$/,"").split(/;\s*/);return $.each(n,function(n){e=(/[\/ :]([^\/ :]+)$/.exec(n)||[])[1],t[e?n.substr(0,n.length-e.length-1).replace(/\d*$/,""):n]=e||!0}),{aol:t.aol,blackberry:t.blackberry,ie:t.msie,ios:t.mobile&&t.safari,opera:t.opera,playstation:t.playstation,version:parseFloat(t.version)||!1}}(),cache:function(){var e={},t="vglnk_"+(new Date).getTime(),n=0;return function(i,o,r){if(i){var s=i[t];if(s||void 0!==r)return s||(s=++n),e[s]||(i[t]=s,e[s]={}),void 0!==r&&(e[s][o]=r),"string"==typeof o?e[s][o]:e[s]}}}(),canonicalizeHostname:function(e){return"string"==typeof e&&(e=$.createA(e)),e.hostname?e.hostname.toString().toLowerCase().replace(/^www\./,"").replace(/:.*$/,""):""},clone:function(e){return $.extend({},e)},contains:function(e,t){return-1!==$.indexOf(e,t)},contextIsAncestor:function(e){for(var t=window.self;t.parent&&t.parent!==t;)if(t=t.parent,t===e)return!0;return!1},cors:function(url){var request,onSuccess=function(){eval(request.responseText)};request=new window.XMLHttpRequest,request.onreadystatechange=function(){4===request.readyState&&200===request.status&&onSuccess()},request.open("GET",url),request.withCredentials=!0,request.send()},createA:function(e,t){return $.createEl("a",{href:e,target:t})},createEl:function(e,t,n,i){var o,r=(i||document).createElement(e);t=t||{},n=n||{};for(o in t)void 0!==t[o]&&(r[o]=t[o]);return $.css(r,n),r},css:function(e,t){var n;for(n in t)try{e.style[n]=t[n]}catch(i){}return e},destructing:function(e){return function(e){var t,n=!1;return function(){return n||(t=e.apply(null,arguments),n=!0),t}}(e)},escapeRegExp:function(){var e;return function(t){return e=e||new RegExp("([.*+?^${}()|[\\]\\\\])","g"),t.replace(e,"\\$1")}}(),eventLink:function(e){var t,n,i=e.target||e.srcElement;do{try{t=i.nodeType}catch(o){return}if(1===t&&(n=i.tagName.toUpperCase(),"A"===n||"AREA"===n))return i;i=i.parentNode}while(i)},exceptionLogger:function(){var e=!1,t=function(){};return function(n,i){return void 0===i?function(){if(!e)return n.apply(this,arguments);try{return n.apply(this,arguments)}catch(i){t(i)}}:(e=i,void(t=n))}}(),fromQuery:function(e){"?"===e.substr(0,1)&&(e=e.substr(1));var t=e.split("&"),n={};return $.each(t,function(e){var t=e.split("=");n[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}),n},hasAttrValue:function(e,t,n,i){return!!t&&$.contains($.attrValues(e,t,i),n)},hasClass:function(e,t){return $.hasAttrValue(e,"className",t)},hasRel:function(e,t){return $.hasAttrValue(e,"rel",t)},indexOf:function(){return Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t)}:function(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}}(),isArray:function(e){return"array"===$.type(e)},isDefaultPrevented:function(e){return e.isDefaultPrevented&&e.isDefaultPrevented()||e.returnValue===!1||e.defaultPrevented===!0},jsonp:function(e){var t=document.getElementsByTagName("script")[0],n=$.createEl("script",{type:"text/javascript",src:e});t.parentNode.insertBefore(n,t)},map:function(e,t){var n=[];return $.each(e,function(e,i){void 0!==e&&(n[i]=t(e))}),n},on:function(){var e;return function(t,n,i){var o,r;if(1===arguments.length)return void(e=t);if(2===arguments.length){if(!e)return;i=n,n=t,t=e}try{o=t["on"+n]}catch(s){}"function"==typeof o&&(t["on"+n]=$.bind(function(e){e=e||window.event;var n=o.apply(t,arguments);this.exceptionLogger(function(){return e?(void 0!==n&&e.returnValue!==!1&&(e.returnValue=n),$.isDefaultPrevented(e)&&"function"===$.type(e.preventDefault)&&e.preventDefault(),e.returnValue):n})()},this)),r=$.exceptionLogger(function(){return e.enabled()?i.apply(null,arguments):void 0}),t.addEventListener?t.addEventListener(n,r,!1):t.attachEvent&&t.attachEvent("on"+n,r)}}(),position:function(e){var t,n=0,i=0,o=0,r=0;if(!e.offsetParent)return!1;t=e;do n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;while(t);t=e;do o+=t.scrollLeft,r+=t.scrollTop,t=t.parentNode;while(t&&t!==document.body);return{x:n-o,y:i-r}},preventDefault:function(e){return e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1},ready:function(){var e,t,n,i,o,r=!1,s=[],a=!1;return document.addEventListener?n=function(){document.removeEventListener("DOMContentLoaded",n,!1),o()}:document.attachEvent&&(i=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",i),o())}),e=function(){if(!r){if(r=!0,"complete"===document.readyState)return o();if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",i);var e=!1;try{e=null===window.frameElement}catch(s){}document.documentElement.doScroll&&e&&t()}$.on(window,"load",o)}},t=function(){if(!a){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout($.exceptionLogger(t),1)}o()}},o=function(){if(!a){if(!document.body)return setTimeout($.exceptionLogger(o),13);a=!0,s&&($.each(s,function(e){e()}),s=null)}},function(t){e(),a?t():s.push(t)}}(),reformatKeys:function(e){var t,n,i=function(e){return"_"+e.toLowerCase()};for(t in e)n=t.replace(/([A-Z])/g,i),"object"===$.type(e[t])&&(e[t]=$.reformatKeys(e[t])),n!==t&&(e[n]=e[t],delete e[t]);return e},removeClass:function(e,t){if($.hasClass(e,t)){var n,i,o=$.attrValues(e,"className");for(n=0,i=o.length;i>n;n++)o[n]===t&&delete o[n];e.className=o.join(" ")}},request:function(e,t,n){var i,o;return n=$.extend({fn:function(){},"return":!1,timeout:null},n),"string"==typeof n.fn?t=$.extend(t,{jsonp:n.fn}):"function"==typeof n.fn&&(i=$.destructing(n.fn),o=$.uniqid("vglnk_jsonp_"),t=$.extend(t,{jsonp:o}),window[o]=$.exceptionLogger(function(){i.apply(this,arguments),window[o]=void 0}),null!==n.timeout&&setTimeout($.exceptionLogger(i),n.timeout)),t=$.extend({format:"jsonp"},t),t=$.toQuery(t),e=e+(t.length?"?":"")+t,n["return"]?e:$.traits.cors?$.cors(e):$.jsonp(e)},toQuery:function(e){var t,n="";for(t in e)null!==e[t]&&void 0!==e[t]&&(n+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.substr(1)},type:function(e){return null===e?"null":void 0===e?"undefined":Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},updateUrl:function(e,t){return $.extend($.createA(e),t).href},uniqid:function(){var e=0;return function(t){return(t||"")+(new Date).getTime()+e++}}()}),$.traits={basicCompatibility:!($.browser.blackberry||$.browser.playstation),cors:window.XMLHttpRequest&&void 0!==(new window.XMLHttpRequest).withCredentials,crossWindowCommunication:!($.browser.ios&&$.browser.version&&($.browser.version<5||$.browser.version>5)),jsRedirectSetsReferrer:$.browser.aol||!($.browser.ie||$.browser.opera),quirksMode:!Boolean(window.addEventListener),windowLevelHandlers:Boolean(window.addEventListener)};var opts,scope,self,viglink;viglink={api:function(e,t,n){var i=opts.api_url+"/"+e;return t=$.extend({cuid:opts.cuid,key:opts.key,drKey:opts.key?null:opts.dr_key,loc:location.href,subId:opts.sub_id,v:1},t),t.subId&&t.key!==opts.key&&(t.subId=null),$.request(i,t,n)},addEventListener:function(e,t){this.fire(e,t)},click:function(){var e=function(e,t){if(!("_self"===t||$.traits.crossWindowCommunication&&$.traits.jsRedirectSetsReferrer))return"go";try{if(void 0===e.document)throw!0;return"jsonp"}catch(n){return"go"}},t=function(e){if("_self"===e)return window.self;if($.traits.crossWindowCommunication&&$.traits.jsRedirectSetsReferrer){var t=window.open("",e);return t.focus(),t}},n=function(e){var t,n=e.previousSibling,i=e.nextSibling,o=["",e.textContent,""],r=10,s=function(e,t,n){var i=function(e){return e.replace(/\s+/g," ")};return e=i(e),t=i(t),n=i(n),e=e.replace(/^\s+/,"")," "===t.substr(0,1)&&(t=t.substr(1),e+=" "!==e.substr(e.length-1,1)?" ":"")," "===t.substr(t.length-1,1)&&(t=t.substr(0,t.length-1),n=(" "!==n.substr(0,1)?" ":"")+n),n=n.replace(/\s+$/,""),[e,t,n]};void 0!==o[1]&&(o[0]=n&&3===n.nodeType?n.data:"",o[2]=i&&3===i.nodeType?i.data:"",o=s.apply(this,o),""!==o[0]&&""!==o[2]&&(o[0]=o[0].split(" ").reverse().slice(0,r+(" "===o[0].substr(o[0].length-1,1)?1:0)).reverse().join(" "),o[2]=o[2].split(" ").slice(0,r).join(" "),t={type:"context",itype:($.cache(e,"params")||{}).type,before:o[0],after:o[2],txt:o[1],loc:location.href,out:e.href,v:2},viglink.log("info",$.toQuery(t))))};return function(i,o){o=i.target||o,o=!o||o===window.name||"_top"===o&&window.top===window.self||"_parent"===o&&window.parent===window.self?"_self":o;var r,s,a=t(o),c=e(a,o);if(r=$.destructing($.bind(function(){opts.time_click&&arguments.length&&this.logTime("clk");var e=Array.prototype.slice.call(arguments);e.unshift(i,a,o),this.onApiClick.apply(this,e)},this)),$.cache(this,"link","string"==typeof i?i:i.href),"string"==typeof i&&(i=$.createA(i,o),!this.preprocessLink(i)))return r();if(!opts.enabled)return r();if(s=this.clickParams(i,c),this.logTime(),opts.log_context&&n(i),"go"===c)this.redirect(this.api("click",s,{"return":!0}),a,o);else if(a===window.self)this.api("click",s,{fn:r,timeout:opts.click_timeout});else{if($.contextIsAncestor(a))return this.redirect(i.href,a,o);r=$.exceptionLogger(r),setTimeout(function(){r()},opts.click_timeout),a.document.open(),a.callback=r,a.document.write("<html><head><title>"+i.href+'</title><script type="text/javascript" src="'+this.api("click",s,{fn:"callback","return":!0})+'"></script></head></html>'),a.document.close()}}}(),clickParams:function(e,t){var n=$.extend($.cache(e,"params"),{format:t,libid:opts.library_id,out:e.href,ref:document.referrer||null,reaf:opts.reaffiliate||null,title:document.title,txt:e.innerHTML});return n.txt.length>128&&(n.txt=n.txt.replace(/<[^>]+>/g,""),n.txt=n.txt.length>128?n.txt.substr(0,125)+"...":n.txt),n},enabled:function(){return opts.enabled&&scope!==window&&window.vglnk&&(window.vglnk.key||"function"==typeof window.vglnk)&&(opts.enabled=!1),opts.enabled},expose:function(e,t){t=t||this[e],t&&("function"==typeof t?t=$.exceptionLogger($.bind(t,this)):"object"==typeof t&&(t=$.clone(t)),self[e]||(self[e]=t))},fire:function(){var e={};return function(t,n){t=t.toLowerCase();var i=e[t]||{fired:!1,listeners:[]},o=function(e){e({type:t})};"function"==typeof n?i.fired?o(n):i.listeners.push(n):(i.fired=!0,$.each(i.listeners,function(e){"function"==typeof e&&o(e)}),i.listeners=[]),e[t]=i}}(),handleRightClick:function(e,t){if(opts.rewrite_modified&&e&&t)switch(t){case"setup":$.cache(e,"href")||$.cache(e,"href",e.href),e.href=this.api("click",this.clickParams(e,"go"),{"return":!0}),setTimeout($.exceptionLogger($.bind(function(){this.handleRightClick(e,"teardown")},this)),0);break;case"teardown":e.href=$.cache(e,"href"),$.cache(e,"href",null)}},harmony:function(){return $.harmony={UNSAFE_QUIRKSMODE_HANDLERS:1},function(e){return opts.harmony_level<e}}(),init:$.exceptionLogger(function(){this.initLibEvents(),this.initNamespace(),this.initOptions(),$.exceptionLogger($.bind(this.logException,this),!opts.dev),this.initDRApi(),this.initApi(),this.enabled()&&(this.initLegacyCallbacks(),this.ping())}),initApi:function(){var e,t={};if(window.vglnk)for(e in window.vglnk)"_plugin"===e.substr(-7)&&(t[e]=window.vglnk[e]);self=scope[self_name]=function(){},this.expose("click"),this.expose("link",viglink.preprocessLink),this.expose("opt"),this.expose("$",$.clone($)),$.extend(self,self===window.vglnk?t:{})},initDRApi:function(){var e=!1;window.DrivingRevenue=$.exceptionLogger($.destructing($.bind(function(){e=!0,opts.dr_key=window.DR_id,this.enabled()&&this.ping()},this))),$.on("DOMReady",function(){if(!e)try{delete window.DrivingRevenue}catch(t){window.DrivingRevenue=void 0}})},initLibEvents:function(){$.on(viglink),$.ready($.bind(function(){this.fire("DOMReady")},this))},initNamespace:function(){window.vglnk&&window.vglnk.key&&(self_name="vglnk");var e,t=window,n=self_name.split(".");for(self_name=n.pop();n.length>0;)e=n.shift(),t[e]=t[e]||{},t=t[e];scope=t,self=scope[self_name]=scope[self_name]||{}},initOptions:function(){var e;this.initLegacyOptions(),opts=$.extend(this.publicOptions({api_url:"//api.viglink.com/api",cuid:null,dev:!1,dr_key:null,enabled:$.traits.basicCompatibility,key:null,partner:null,sub_id:null,reaffiliate:!1,harmony_level:0,rewrite_original:!0,rewrite_modified:!1}),opts,self,{click_timeout:1e3,hop_timeout:2e3,debug:!1,library_id:null,log_context:!0,nofollow:{},norewrite:{},plugins:{link_affiliation:{},modified_clicks:{}},swap:{},time_click:!1,time_ping:!1});for(e in opts)"_plugin"===e.substr(-7)&&delete opts[e]},initLegacyOptions:function(){var e,t={DR_id:"dr_key",vglnk_api_key:"key",vglnk_cuid:"cuid",vglnk_domain:"api_url",vglnk_reaf:"reaffiliate",vglnk_subid:"sub_id"};for(e in t)void 0!==window[e]&&(self[t[e]]=window[e],"vglnk_domain"===e&&(self[t[e]]+="/api"))},initLegacyCallbacks:function(){var e,t={vl_cB:$.bind(this.onApiClick,this),vl_disable:function(){opts.enabled=!1}};for(e in t)window[e]=t[e]},initLinks:function(){$.each(document.links,$.bind(this.preprocessLink,this))},initPlugins:function(){var e,t=100,n=5e3,i=1,o=[],r=function(){var s=[],a=function(e){return function(){if(e){var t=Array.prototype.slice.call(arguments);t.unshift("custom",e),viglink.log.apply(this,t)}}};e=null,$.each(o,function(e){var t,n,i=e[0],o=e[1],r=e[2],c=window.vglnk&&window.vglnk[i+"_plugin"];c?(t="function"===$.type(c.run)?c.run:c,n="function"===$.type(c.setup)?c.setup:null,o&&1===o.mode?(n&&n(o,$.clone($),self,a(o.key)),delete o.mode):t&&(n&&!r&&n(o,$.clone($),self,a(o.key)),t(o,$.clone($),self,a(o.key)))):s.push(e)}),o=s,o.length>0&&(e=setTimeout($.exceptionLogger(r),Math.min(Math.max(Math.pow(2,++i),t),n)))},s=function(t,n){return function(t,n){return function(){o.push([t,n,!0]),i=1,clearTimeout(e),r()}}(t,n)};return function(e){var t;for(t in e)"object"==typeof e[t]&&e[t].enabled!==!1&&(o.push([t,e[t]]),1===e[t].mode&&this.expose("init_"+t,s(t,e[t])));r()}}(),isRewritable:function(){var e=$.canonicalizeHostname(document.location);return function(t){var n,i="";try{n=t.hostname,i=t.protocol,n.charAt(0)}catch(o){return!1}return""!==n&&(n=$.canonicalizeHostname(t)),!(""===n||e===n||!i.match(/^https?:$/i)||opts.norewrite[n]||!opts.rewrite_original&&!$.cache(t,"type")||$.hasRel(t,"norewrite")||$.hasRel(t,"noskim"))}}(),initEvents:$.destructing(function(){var e=$.traits.windowLevelHandlers?window:document;$.on(e,"mousedown",function(e){e=e||window.event;var t=$.eventLink(e);t&&!$.cache(t,"evented")&&($.on(t,"click",function(e){}),$.cache(t,"evented",!0))}),(!$.traits.quirksMode||viglink.harmony($.harmony.UNSAFE_QUIRKSMODE_HANDLERS))&&($.on(e,"click",$.bind(viglink.onClick,viglink)),$.on(e,"contextmenu",$.bind(viglink.onContextmenu,viglink)))}),log:function(e,t,n,i){var o,r,s=$.toQuery({nocache:$.uniqid()}),a="pixel.gif";if("custom"===e)r=t,e=n,s+="&"+$.toQuery({key:r,type:e}),$.each("array"===$.type(i)?i:[i],function(e){$.each(["e","i","o"],function(t){delete e[t]}),s+="&"+$.toQuery(e)});else{if(s+="&"+$.toQuery({key:opts.key,drKey:opts.key?null:opts.dr_key}),"time"===e)a="time.gif",o={libId:opts.library_id,time:n,type:t};else if("exception"===e)o={e:t,o:n};else{if("info"!==e)return;o={i:t}}s+="&"+$.toQuery(o)}$.createEl("img").src=opts.api_url+"/"+a+"?"+s},logException:function(e){if(opts.debug){var t={link:$.cache(this,"link"),loc:document.location.href,UA:navigator.userAgent};"string"==typeof e?t.message=e:t=$.extend(t,e),this.log("exception",e,$.toQuery(t))}},logTime:function(){var e;return function(t){0===arguments.length?e=(new Date).getTime():this.log("time",t,(new Date).getTime()-e)}}(),onApiClick:function(e,t,n,i,o){var r,s=i||e.href,a=$.bind(function(){this.redirect(s,t,n)},this);"object"==typeof o&&(o.tracking||o.image)?(r=$.createEl(o.tracking?"iframe":"img",{src:o.tracking||o.image},{height:0,width:0,visibility:"hidden"}),document.body.appendChild(r),setTimeout($.exceptionLogger(a),o.timeout||opts.hop_timeout)):a()},onApiPing:function(e,t,n,i,o,r){opts.rewrite_original=!1,o=$.reformatKeys(o||{});var s,a,c;a=function(e){var t={},n=function(e){$.isArray(e)?t[e[0]]=e[1]:t[e]=1};return $.isArray(e)&&$.each(e,n),t},c=$.extend(opts.plugins,o.plugins),opts=$.extend(opts,o),delete opts.plugins,opts.library_id=e,opts.click_timeout=t,opts.time_ping&&this.logTime("png"),$.extend(opts.norewrite,a(n)),$.extend(opts.swap,a(i)),$.extend(opts.nofollow,a(r));for(s in opts)"on"===s.toLowerCase().substr(0,2)&&s.length>2&&"function"===$.type(opts[s])&&($.on(viglink,s.toLowerCase().substr(2),$.bind(opts[s],window)),delete opts[s]);this.initPlugins(c),this.initLinks(),this.initEvents(),this.fire("libready")},onClick:function(e){e=e||window.event;var t=e.ctrlKey||e.metaKey||e.altKey||e.shiftKey,n=e.which&&1===e.which||0===e.button,i=$.eventLink(e);if(i&&this.isRewritable(i)&&!t&&n&&!$.isDefaultPrevented(e))return this.click(i),$.preventDefault(e)},onContextmenu:function(e){var t=$.eventLink(e||window.event);t&&this.isRewritable(t)&&this.handleRightClick(t,"setup")},opt:function(e,t){return void 0!==t&&void 0!==this.publicOptions()[e]&&(opts[e]=t),opts[e]},ping:function(){var e=!1;return function(){e||!opts.key&&!opts.dr_key||(e=!0,this.logTime(),this.api("ping",null,{fn:$.bind(this.onApiPing,this)}))}}(),preprocessLink:function(e){if(this.isRewritable(e)){var t,n=$.createA(opts.api_url);return"/api/click"!=e.pathname||e.hostname!=n.hostname&&!e.hostname.match(/(^|\.)(api|cdn|apicdn)\.viglink\.com$/)||(t=$.fromQuery(e.search),void 0!==t.out&&(e.href=t.out,delete t.out,$.cache(e,"params",t))),opts.swap[e.href]&&(e.href=opts.swap[e.href]),opts.nofollow[e.href]&&!$.hasRel(e,"nofollow")&&(e.rel=(e.rel?e.rel+" ":"")+"nofollow"),window.IPBoard&&window.IPBoard.prototype&&window.IPBoard.prototype.delegate&&$.hasRel(e,"external")&&(e.rel=e.rel.replace(/(^| )external( |$)/,""),e.target="_blank"),e}},publicOptions:function(){var e={};return function(t){return"object"===$.type(t)&&(e=t),$.extend({},e)}}(),redirect:function(e,t,n){var i,o;$.traits.crossWindowCommunication||t?$.traits.jsRedirectSetsReferrer?setTimeout($.exceptionLogger(function(){t&&t!==window.self?$.contextIsAncestor(t)?t.location=e:t.location.replace(e):window.location=e}),0):("_blank"===n&&(n=$.uniqid("win_")),i=$.createA(e,n),i.rel="norewrite",document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)):(o=window.open(e,n),o.focus())}},viglink.init()}("undefined"==typeof vglnk_self?"vglnk":vglnk_self),window.vglnk=window.vglnk||{},window.vglnk.link_affiliation_plugin={run:function(e,t,n){n.opt("rewrite_original",!0)}},window.vglnk=window.vglnk||{},window.vglnk.modified_clicks_plugin={run:function(e,t,n){n.opt("rewrite_modified",!0)}};
//# sourceMappingURL=maps/alfie.js.map
